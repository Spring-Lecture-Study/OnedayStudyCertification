# 9ì›”1ì¼ ì •ë¦¬

---

## âœ… ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±
```java
// ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±
ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
```


- ApplicationContextë¥¼ **ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ**ë¼ í•œë‹¤.
- ApplicationContext ëŠ” **ì¸í„°í˜ì´ìŠ¤**ì´ë‹¤.
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” **XML**ì„ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆê³ , **ì• ë…¸í…Œì´ì…˜** ê¸°ë°˜ì˜ ìë°” ì„¤ì • í´ë˜ìŠ¤ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
- ì§ì „ì— AppConfig ë¥¼ ì‚¬ìš©í–ˆë˜ ë°©ì‹ì´ **ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ìë°” ì„¤ì • í´ë˜ìŠ¤ë¡œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“  ê²ƒì´ë‹¤.**
- ìë°” ì„¤ì • í´ë˜ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ( ApplicationContext )ë¥¼ ë§Œë“¤ì–´ë³´ì.
    - new AnnotationConfigApplicationContext(AppConfig.class);
    - ì´ í´ë˜ìŠ¤ëŠ” ApplicationContext ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´ì´ë‹¤.
    
    ì°¸ê³ : ë” ì •í™•íˆëŠ” ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ë¶€ë¥¼ ë•Œ BeanFactory , ApplicationContext ë¡œ êµ¬ë¶„í•´ì„œ ì´ì•¼ê¸°
    í•œë‹¤. ì´ ë¶€ë¶„ì€ ë’¤ì—ì„œ ì„¤ëª…í•˜ê² ë‹¤. BeanFactory ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ëŠ” ê±°ì˜ ì—†ìœ¼ë¯€ë¡œ ì¼ë°˜ì ìœ¼ë¡œ ApplicationContext ë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ í•œë‹¤.
    

## âœ… ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„± ë° ë¹ˆ ë“±ë¡ ê³¼ì •

### âœ… ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ ìƒì„±

![Untitled 1](https://github.com/user-attachments/assets/bbcaa483-1766-4aea-8cc2-6b0348668cca)

AnnotationConfigApplicationContextì— AppConfig.classë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬í•˜ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ìƒì„±ë©ë‹ˆë‹¤.

- ì´ ì»¨í…Œì´ë„ˆ ì•ˆì—ëŠ” **ìŠ¤í”„ë§ ë¹ˆ ì €ì¥ì†Œ**ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

### âœ… ìŠ¤í”„ë§ ë¹ˆ ì €ì¥ì†Œ

- ìŠ¤í”„ë§ ë¹ˆ ì €ì¥ì†Œì—ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì‚¬ìš©í•  **ê°ì²´(ë¹ˆ)**ë“¤ì´ ì €ì¥ë©ë‹ˆë‹¤.
    - ì´ ë¹ˆë“¤ì€ AppConfig.classì™€ ê°™ì€ ì„¤ì • í´ë˜ìŠ¤ì˜ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.

### âœ… ë¹ˆ ìƒì„± ë° ë“±ë¡

![Untitled 2](https://github.com/user-attachments/assets/0d3e42e5-7317-4659-be48-7e1a6798e511)

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” **AppConfig** í´ë˜ìŠ¤ì— ì •ì˜ëœ **@Bean** ì–´ë…¸í…Œì´ì…˜ì´ ë¶™ì–´ ìˆëŠ” ë©”ì„œë“œë“¤ì„ í˜¸ì¶œí•©ë‹ˆë‹¤.
    - ë©”ì„œë“œê°€ ë°˜í™˜í•˜ëŠ” ê°ì²´ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê³ , ë©”ì„œë“œ ì´ë¦„ì„ í•´ë‹¹ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ ì§€ì •í•©ë‹ˆë‹¤.

**ë¹ˆ ì´ë¦„**

- ë¹ˆ ì´ë¦„ì€ **ë©”ì„œë“œ ì´ë¦„**ì„ ì‚¬ìš©í•œë‹¤.
- ë¹ˆ ì´ë¦„ì„ ì§ì ‘ ë¶€ì—¬í•  ìˆ˜ ë„ ìˆë‹¤.
- @Bean(name="memberService2")

**ì£¼ì˜**: ë¹ˆ ì´ë¦„ì€ í•­ìƒ ë‹¤ë¥¸ ì´ë¦„ì„ ë¶€ì—¬í•´ì•¼ í•œë‹¤. ê°™ì€ ì´ë¦„ì„ ë¶€ì—¬í•˜ë©´, ë‹¤ë¥¸ ë¹ˆì´ ë¬´ì‹œë˜ê±°ë‚˜, ê¸°ì¡´ ë¹ˆì„ ë®ì–´ë²„ë¦¬ê±°ë‚˜ ì„¤ì •ì— ë”°ë¼ ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤.

![Untitled 3](https://github.com/user-attachments/assets/ba287396-463a-4f6f-9227-41dc9b05c19b)

![Untitled 4](https://github.com/user-attachments/assets/a5e556e8-89d7-476e-9f56-43110c5be609)

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” **ì„¤ì • ì •ë³´ë¥¼ ì°¸ê³ **í•´ì„œ **ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…(DI)**í•œë‹¤.
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì„¤ì • í´ë˜ìŠ¤ë¥¼ í†µí•´ ìƒì„±ëœ **ìŠ¤í”„ë§ ë¹ˆë“¤ì„ ê´€ë¦¬**í•˜ë©°, ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹¤í–‰ë˜ë©´ì„œ ì´ ë¹ˆë“¤ì„ í•„ìš”ì— ë”°ë¼ **ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…(DI)í•˜ì—¬ ì‚¬ìš©**í•©ë‹ˆë‹¤.
- ë‹¨ìˆœíˆ ìë°” ì½”ë“œë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒ ê°™ì§€ë§Œ, ì°¨ì´ê°€ ìˆë‹¤. ì´ ì°¨ì´ëŠ” ë’¤ì— ì‹±ê¸€í†¤ ì»¨í…Œì´ë„ˆì—ì„œ ì„¤ëª…í•œë‹¤.

ì°¸ê³ 
ìŠ¤í”„ë§ì€ ë¹ˆì„ ìƒì„±í•˜ê³ , ì˜ì¡´ê´€ê³„ë¥¼ ì£¼ì…í•˜ëŠ” ë‹¨ê³„ê°€ ë‚˜ëˆ„ì–´ì ¸ ìˆë‹¤. ê·¸ëŸ°ë° ì´ë ‡ê²Œ ìë°” ì½”ë“œë¡œ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•˜ë©´ ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ë©´ì„œ ì˜ì¡´ê´€ê³„ ì£¼ì…ë„ í•œë²ˆì— ì²˜ë¦¬ëœë‹¤. 

ì™œëƒí•˜ë©´ ìŠ¤í”„ë§ì€ ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ë©´ì„œ í•´ë‹¹ ë¹ˆì´ í•„ìš”ë¡œ í•˜ëŠ” ì˜ì¡´ì„±ì„ ìë™ìœ¼ë¡œ ì£¼ì…í•©ë‹ˆë‹¤.

## âœ…ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì¡°íšŒ

---

í…ŒìŠ¤í¬ ì½”ë“œë¥¼ ë§Œë“¤ì–´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ì‹¤ì œ ìŠ¤í”„ë§ ë¹ˆë“¤ì´ ì˜ ë“±ë¡ ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ë³´ì.

test â†’ java â†’ hello.core â†’ beanfind(íŒ¨í‚¤ì§€) â†’ ApplicationContextInfoText í´ë˜ìŠ¤ ìƒì„±

### âœ… ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆ ì¶œë ¥ í…ŒìŠ¤íŠ¸

```java
class ApplicationContextInfoTest {

    ApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);

    @Test
    @DisplayName("ëª¨ë“  ë¹ˆ ì¶œë ¥í•˜ê¸°")
    void findAllBean() {
        String[] beanDefinitionNames = ac.getBeanDefinitionNames();
        for (String beanDefinitionName : beanDefinitionNames) {
            Object bean = ac.getBean(beanDefinitionName);
            System.out.println("name = " + beanDefinitionName + " object = " + bean);
        }
    }
```

Junit5ë¶€í„°ëŠ” í´ë˜ìŠ¤ ì ‘ê·¼ì œì–´ìì— publicì„ ìƒëµí•´ë„ ëœë‹¤.

getBeanDefinitionNames ë©”ì„œë“œë¥¼ í†µí•´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ **ëª¨ë“  ë¹ˆì˜ ì´ë¦„ì„ String ë°°ì—´ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.**

ê·¸ í›„, for ë¬¸ì„ ì‚¬ìš©í•´ ê° ë¹ˆì˜ ì´ë¦„ì„ ìˆœíšŒí•˜ë©°, getBean ë©”ì„œë“œë¥¼ í†µí•´ **í•´ë‹¹ ì´ë¦„ì˜ ë¹ˆ ê°ì²´ë¥¼ ê°€ì ¸ì™€ ë³€ìˆ˜ì— ì €ì¥**í•˜ê³ , í•´ë‹¹ ë¹ˆ ì´ë¦„ê³¼ ë¹ˆ ê°ì²´ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.

**ac.getBeanDefinitionNames()**

ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡ëœ ëª¨ë“  ë¹ˆì˜ ì´ë¦„ì„ String ë°°ì—´ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤. ë¹ˆì˜ ì´ë¦„ì€ @Bean ë©”ì„œë“œë‚˜ ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì„ í†µí•´ ë“±ë¡ëœ í´ë˜ìŠ¤ì˜ ì´ë¦„ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

**âŒ¨ï¸ í…ŒìŠ¤íŠ¸ ê²°ê³¼** 

```java
name = org.springframework.context.annotation.internalConfigurationAnnotationProcessor object = org.springframework.context.annotation.ConfigurationClassPostProcessor@c94fd30
name = org.springframework.context.annotation.internalAutowiredAnnotationProcessor object = org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor@36328d33
name = org.springframework.context.annotation.internalCommonAnnotationProcessor object = org.springframework.context.annotation.CommonAnnotationBeanPostProcessor@2c4d1ac
name = org.springframework.context.event.internalEventListenerProcessor object = org.springframework.context.event.EventListenerMethodProcessor@7f0d96f2
name = org.springframework.context.event.internalEventListenerFactory object = org.springframework.context.event.DefaultEventListenerFactory@545b995e
name = appConfig object = hello.core.AppConfig$$SpringCGLIB$$0@76a2ddf3
name = memberService object = hello.core.member.MemberServiceImpl@524f3b3a
name = memberRepository object = hello.core.member.MemoryMemberRepository@41e68d87
name = orderService object = hello.core.order.OrderServiceImpl@49ff7d8c
name = discountPolicy object = hello.core.discount.RateDiscountPolicy@29526c05
```

ìƒìœ„ 5ê°œì˜ ë¹ˆì€ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ê°€ ë‚´ë¶€ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë¹ˆë“¤ë¡œ, ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •ê³¼ ê´€ë ¨ëœ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. 

í•˜ìœ„ 5ê°œì˜ ë¹ˆì€ AppConfig í´ë˜ìŠ¤ì—ì„œ ì§ì ‘ ë“±ë¡í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆë“¤ë¡œ, memberService, memberRepository, orderService, discountPolicyì™€ ê°™ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í•µì‹¬ ë¡œì§ì— í•´ë‹¹í•˜ëŠ” ë¹ˆë“¤ì…ë‹ˆë‹¤.

### âœ… ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ ì¶œë ¥í•˜ê¸°

```java
@Test
@DisplayName("ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ ì¶œë ¥í•˜ê¸°")
    void findApplicationBean() {
        ConfigurableApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);
        String[] beanDefinitionNames = ac.getBeanDefinitionNames();

        for (String beanDefinitionName : beanDefinitionNames) {
            BeanDefinition beanDefinition = ac.getBeanFactory().getBeanDefinition(beanDefinitionName);

            // Role ROLE_APPLICATION: ì§ì ‘ ë“±ë¡í•œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¹ˆ
            // Role ROLE_INFRASTRUCTURE: ìŠ¤í”„ë§ì´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆ
            if (beanDefinition.getRole() == BeanDefinition.ROLE_APPLICATION) {
                Object bean = ac.getBean(beanDefinitionName);
                System.out.println("name = " + beanDefinitionName + " object = " + bean);
            }
        }
    }
```

ìŠ¤í”„ë§ì´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆì€ **getRole()** ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.

- ROLE_APPLICATION : ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ìê°€ ì •ì˜í•œ ë¹ˆ
- ROLE_INFRASTRUCTURE : ìŠ¤í”„ë§ì´ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë¹ˆ

## âœ…BeanFactoryì™€ ApplicationContext

---

beanFactoryì™€ ApplicationContextì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì.

![image](https://github.com/user-attachments/assets/9b0644a2-5a8a-4a7c-be9c-1303ef320ccb)

### BeanFactory

- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì˜ **ìµœìƒìœ„ ì¸í„°í˜ì´ìŠ¤**ë‹¤.
- ìŠ¤í”„ë§ **ë¹ˆì„ ê´€ë¦¬**í•˜ê³  **ì¡°íšŒ**í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•œë‹¤.
- **getBean()** ì„ ì œê³µí•œë‹¤.
- ì§€ê¸ˆê¹Œì§€ ìš°ë¦¬ê°€ ì‚¬ìš©í–ˆë˜ ëŒ€ë¶€ë¶„ì˜ ê¸°ëŠ¥ì€ BeanFactoryê°€ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.

### ApplicationContext

- BeanFactory ê¸°ëŠ¥ì„ ëª¨ë‘ ìƒì†ë°›ì•„ì„œ ì œê³µí•œë‹¤.
- ë¹ˆì„ ê´€ë¦¬í•˜ê³  ê²€ìƒ‰í•˜ëŠ” ê¸°ëŠ¥ì„ BeanFactoryê°€ ì œê³µí•´ì£¼ëŠ”ë°, ê·¸ëŸ¬ë©´ ë‘˜ì˜ ì°¨ì´ê°€ ë­˜ê¹Œ?
- ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•  ë•ŒëŠ” ë¹ˆì„ ê´€ë¦¬í•˜ê³  ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ì€ ë¬¼ë¡ ì´ê³ , ìˆ˜ ë§ì€ ë¶€ê°€ê¸°ëŠ¥ì´ í•„ìš”í•˜ë‹¤.

### âœ… **ApplicatonContextê°€ ì œê³µí•˜ëŠ” ë¶€ê°€ê¸°ëŠ¥**

![image 1](https://github.com/user-attachments/assets/3be3f195-36ee-4acc-8ef2-132bc9d45b18)

- ë©”ì‹œì§€ì†ŒìŠ¤ë¥¼ í™œìš©í•œ êµ­ì œí™” ê¸°ëŠ¥
    - ì˜ˆë¥¼ ë“¤ì–´ì„œ í•œêµ­ì—ì„œ ë“¤ì–´ì˜¤ë©´ í•œêµ­ì–´ë¡œ, ì˜ì–´ê¶Œì—ì„œ ë“¤ì–´ì˜¤ë©´ ì˜ì–´ë¡œ ì¶œë ¥
- í™˜ê²½ë³€ìˆ˜
    - ë¡œì»¬, ê°œë°œ, ìš´ì˜ë“±ì„ êµ¬ë¶„í•´ì„œ ì²˜ë¦¬
- ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë²¤íŠ¸
    - ì´ë²¤íŠ¸ë¥¼ ë°œí–‰í•˜ê³  êµ¬ë…í•˜ëŠ” ëª¨ë¸ì„ í¸ë¦¬í•˜ê²Œ ì§€ì›
- í¸ë¦¬í•œ ë¦¬ì†ŒìŠ¤ ì¡°íšŒ
    - íŒŒì¼, í´ë˜ìŠ¤íŒ¨ìŠ¤, ì™¸ë¶€ ë“±ì—ì„œ ë¦¬ì†ŒìŠ¤ë¥¼ í¸ë¦¬í•˜ê²Œ ì¡°íšŒ

### ì •ë¦¬

- ApplicationContextëŠ” BeanFactoryì˜ ê¸°ëŠ¥ì„ ìƒì†ë°›ëŠ”ë‹¤.
- ApplicationContextëŠ” ë¹ˆ ê´€ë¦¬ê¸°ëŠ¥ + í¸ë¦¬í•œ ë¶€ê°€ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.
- BeanFactoryë¥¼ ì§ì ‘ ì‚¬ìš©í•  ì¼ì€ ê±°ì˜ ì—†ë‹¤. ë¶€ê°€ê¸°ëŠ¥ì´ í¬í•¨ëœ ApplicationContextë¥¼ ì‚¬ìš©í•œë‹¤.
- ê·¸ë˜ì„œ BeanFactoryë‚˜ ApplicationContextë¥¼ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¼ í•œë‹¤.

## âœ…ë‹¤ì–‘í•œ ì„¤ì • í˜•ì‹ ì§€ì› - ìë°” ì½”ë“œ, XML

---

ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ë‹¤ì–‘í•œ í˜•ì‹ì˜ ì„¤ì • ì •ë³´ë¥¼ ë°›ì•„ë“¤ì¼ ìˆ˜ ìˆê²Œ ìœ ì—°í•˜ê²Œ ì„¤ê³„ë˜ì–´ ìˆë‹¤.
ìë°” ì½”ë“œ, XML, Groovy ë“±ë“±

![image 2](https://github.com/user-attachments/assets/7c7e2ede-2da2-4abe-bf2a-d450390dc596)

### âœ… ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ ìë°” ì½”ë“œ ì„¤ì • ì‚¬ìš©

ì§€ê¸ˆê¹Œì§€ í–ˆë˜ ê²ƒì´ë‹¤.
new AnnotationConfigApplicationContext(AppConfig.class)
AnnotationConfigApplicationContext í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ **ìë°” ì½”ë“œë¡œëœ ì„¤ì • ì •ë³´ë¥¼ ë„˜ê¸°ë©´ ëœë‹¤.**

### âœ… XML ì„¤ì • ì‚¬ìš©

ìµœê·¼ì—ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ë§ì´ ì‚¬ìš©í•˜ë©´ì„œ XMLê¸°ë°˜ì˜ ì„¤ì •ì€ ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. ì•„ì§ ë§ì€ ë ˆê±°ì‹œ í”„ë¡œì íŠ¸ ë“¤ì´ XMLë¡œ ë˜ì–´ ìˆê³ , ë˜ XMLì„ ì‚¬ìš©í•˜ë©´ ì»´íŒŒì¼ ì—†ì´ ë¹ˆ ì„¤ì • ì •ë³´ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆëŠ” ì¥ì ë„ ìˆìœ¼ë¯€ë¡œ í•œë²ˆì¯¤ ë°°ì›Œë‘ëŠ” ê²ƒë„ ê´œì°®ë‹¤.
**GenericXmlApplicationContext** ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ xml ì„¤ì • íŒŒì¼ì„ ë„˜ê¸°ë©´ ëœë‹¤.

**ğŸ“ XmlAppContext.java**

```java
public class XmlAppContext {
    @Test
    void xmlAppContext() {
        ApplicationContext ac = new GenericXmlApplicationContext("appConfig.xml");
        MemberService memberService = ac.getBean("memberService", MemberService.class);
        assertThat(memberService).isInstanceOf(MemberService.class);
    }
}
```

**ğŸ“ appConfig.xml**

```java
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="memberService" class="hello.core.member.MemberServiceImpl">
        <constructor-arg name="memberRepository" ref="memberRepository" />
    </bean>

    <bean id="memberRepository"
          class="hello.core.member.MemoryMemberRepository" />
    
    <bean id="orderService" class="hello.core.order.OrderServiceImpl">
        <constructor-arg name="memberRepository" ref="memberRepository" />
        <constructor-arg name="discountPolicy" ref="discountPolicy" />
    </bean>
    
    <bean id="discountPolicy" class="hello.core.discount.RateDiscountPolicy" />
</beans>
```

ìë°” í´ë˜ìŠ¤ë¡œ ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ AppConfig ì„¤ì • íŒŒì¼ì„ ë§Œë“¤ë“¯ì´, ì´ appConfig.xml íŒŒì¼ë„ ìœ ì‚¬í•œ ì—­í• ì„ í•œë‹¤.

## âœ…ìŠ¤í”„ë§ ë¹ˆ ì„¤ì • ë©”íƒ€ ì •ë³´ - BeanDefinition

---

- ìŠ¤í”„ë§ì€ ì–´ë–»ê²Œ ì´ëŸ° ë‹¤ì–‘í•œ ì„¤ì • í˜•ì‹ì„ ì§€ì›í•˜ëŠ” ê²ƒì¼ê¹Œ? ê·¸ ì¤‘ì‹¬ì—ëŠ” **BeanDefinition** ì´ë¼ëŠ” ì¶”ìƒí™”ê°€ ìˆë‹¤.
- ì‰½ê²Œ ì´ì•¼ê¸°í•´ì„œ ì—­í• ê³¼ êµ¬í˜„ì„ ê°œë…ì ìœ¼ë¡œ ë‚˜ëˆˆ ê²ƒì´ë‹¤!
    - XMLì„ ì½ì–´ì„œ BeanDefinitionì„ ë§Œë“¤ë©´ ëœë‹¤.
    - ìë°” ì½”ë“œë¥¼ ì½ì–´ì„œ BeanDefinitionì„ ë§Œë“¤ë©´ ëœë‹¤.
    - ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” BeanDefinitionë§Œ ì˜ì¡´í•˜ê¸° ë•Œë¬¸ì— ìë°” ì½”ë“œì¸ì§€, XMLì¸ì§€ ëª°ë¼ë„ ëœë‹¤. ì˜¤ì§ BeanDefinitionë§Œ ì•Œë©´ ëœë‹¤.
        - ì¶”ìƒí™”ì—ë§Œ ì˜ì¡´í•˜ê²Œ ì„¤ê³„
        - BeanDefiniyionì€ ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.
- BeanDefinition ì„ **ë¹ˆ ì„¤ì • ë©”íƒ€ì •ë³´**ë¼ í•œë‹¤.
    - @Bean , <bean> ë‹¹ ê°ê° í•˜ë‚˜ì”© ë©”íƒ€ ì •ë³´ê°€ ìƒì„±ëœë‹¤.
- ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆëŠ” ì´ **ë©”íƒ€ì •ë³´**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆì„ ìƒì„±í•œë‹¤.

![image 3](https://github.com/user-attachments/assets/f6e3b680-498e-48ca-8d69-0a6d7379f86d)

ì½”ë“œ ë ˆë²¨ë¡œ ì¡°ê¸ˆ ë” ê¹Šì´ ìˆê²Œ ë“¤ì–´ê°€ë³´ì.

![image 4](https://github.com/user-attachments/assets/24c64f07-5653-4558-8f44-57aa81c34655)

- AnnotationConfigApplicationContext ëŠ” **AnnotatedBeanDefinitionReader** ë¥¼ ì‚¬ìš©í•´ì„œ
AppConfig.class ë¥¼ ì½ê³  **BeanDefinition ì„ ìƒì„±**í•œë‹¤.
- GenericXmlApplicationContext ëŠ” **XmlBeanDefinitionReader** ë¥¼ ì‚¬ìš©í•´ì„œ appConfig.xml
ì„¤ì • ì •ë³´ë¥¼ ì½ê³  **BeanDefinition ì„ ìƒì„±**í•œë‹¤.
- ìƒˆë¡œìš´ í˜•ì‹ì˜ ì„¤ì • ì •ë³´ê°€ ì¶”ê°€ë˜ë©´, XxxBeanDefinitionReaderë¥¼ ë§Œë“¤ì–´ì„œ BeanDefinition ì„ ìƒì„±í•˜ë©´ ëœë‹¤.

### BeanDefinition ì‚´í´ë³´ê¸°

**ğŸ“ BeanDefinitionTest.java**

```java
public class BeanDefinitionTest {

    AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AppConfig.class);

    @Test
    @DisplayName("ë¹ˆ ì„¤ì • ë©”íƒ€ì •ë³´ í™•ì¸")
    void findApplicationBean() {
        String[] beanDefinitionNames = ac.getBeanDefinitionNames();
        for (String beanDefinitionName : beanDefinitionNames) {
            BeanDefinition beanDefinition = ac.getBeanDefinition(beanDefinitionName);

            if (beanDefinition.getRole() == BeanDefinition.ROLE_APPLICATION) {
                System.out.println("beanDefinitionName = " + beanDefinitionName +
                "beanDefinition = " + beanDefinition);
            }
        }
    }
```

ğŸ’¬ ê²°ê³¼ ë¡œê·¸

```java
beanDefinitionName = appConfigbeanDefinition = Generic bean: class [hello.core.AppConfig$$SpringCGLIB$$0]; scope=singleton; abstract=false; lazyInit=null; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodNames=null; destroyMethodNames=null
beanDefinitionName = memberServicebeanDefinition = Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=appConfig; factoryMethodName=memberService; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in hello.core.AppConfig
beanDefinitionName = memberRepositorybeanDefinition = Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=appConfig; factoryMethodName=memberRepository; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in hello.core.AppConfig
beanDefinitionName = orderServicebeanDefinition = Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=appConfig; factoryMethodName=orderService; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in hello.core.AppConfig
beanDefinitionName = discountPolicybeanDefinition = Root bean: class [null]; scope=; abstract=false; lazyInit=null; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=appConfig; factoryMethodName=discountPolicy; initMethodNames=null; destroyMethodNames=[(inferred)]; defined in hello.core.AppConfig
```

**BeanDefinition ì •ë³´**

- **BeanClassName**: ìƒì„±í•  ë¹ˆì˜ í´ë˜ìŠ¤ ëª…(ìë°” ì„¤ì • ì²˜ëŸ¼ íŒ©í† ë¦¬ ì—­í• ì˜ ë¹ˆì„ ì‚¬ìš©í•˜ë©´ ì—†ìŒ)
- **factoryBeanName**: íŒ©í† ë¦¬ ì—­í• ì˜ ë¹ˆì„ ì‚¬ìš©í•  ê²½ìš° ì´ë¦„, ì˜ˆ) appConfig
- **factoryMethodName**: ë¹ˆì„ ìƒì„±í•  íŒ©í† ë¦¬ ë©”ì„œë“œ ì§€ì •, ì˜ˆ) memberService
- **Scope**: ì‹±ê¸€í†¤(ê¸°ë³¸ê°’)
- **lazyInit**: ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•  ë•Œ ë¹ˆì„ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ì‹¤ì œ ë¹ˆì„ ì‚¬ìš©í•  ë•Œ ê¹Œì§€ ìµœëŒ€í•œ ìƒì„±ì„ ì§€ì—° ì²˜ë¦¬ í•˜ëŠ”ì§€ ì—¬ë¶€
- **InitMethodName**: ë¹ˆì„ ìƒì„±í•˜ê³ , ì˜ì¡´ê´€ê³„ë¥¼ ì ìš©í•œ ë’¤ì— í˜¸ì¶œë˜ëŠ” ì´ˆê¸°í™” ë©”ì„œë“œ ëª…
- **DestroyMethodName**: ë¹ˆì˜ ìƒëª…ì£¼ê¸°ê°€ ëë‚˜ì„œ ì œê±°í•˜ê¸° ì§ì „ì— í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œ ëª…
- **Constructor arguments**, **Properties**: ì˜ì¡´ê´€ê³„ ì£¼ì…ì—ì„œ ì‚¬ìš©í•œë‹¤. (ìë°” ì„¤ì • ì²˜ëŸ¼ íŒ©í† ë¦¬ ì—­í• ì˜ ë¹ˆì„ ì‚¬ìš©í•˜ë©´ ì—†ìŒ)

ì´ëŸ¬í•œ ë©”íƒ€ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‹¤ì œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ë‹¤.

**ì •ë¦¬**

- BeanDefinitionì„ ì§ì ‘ ìƒì„±í•´ì„œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë“±ë¡í•  ìˆ˜ ë„ ìˆë‹¤. í•˜ì§€ë§Œ ì‹¤ë¬´ì—ì„œ BeanDefinitionì„ ì§ì ‘ ì •ì˜í•˜ê±°ë‚˜ ì‚¬ìš©í•  ì¼ì€ ê±°ì˜ ì—†ë‹¤.
- BeanDefinitionì— ëŒ€í•´ì„œëŠ” ë„ˆë¬´ ê¹Šì´ìˆê²Œ ì´í•´í•˜ê¸° ë³´ë‹¤ëŠ”, ìŠ¤í”„ë§ì´ ë‹¤ì–‘í•œ í˜•íƒœì˜ ì„¤ì • ì •ë³´ë¥¼
BeanDefinitionìœ¼ë¡œ ì¶”ìƒí™”í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒ ì •ë„ë§Œ ì´í•´í•˜ë©´ ëœë‹¤.
- ê°€ë” ìŠ¤í”„ë§ ì½”ë“œë‚˜ ìŠ¤í”„ë§ ê´€ë ¨ ì˜¤í”ˆ ì†ŒìŠ¤ì˜ ì½”ë“œë¥¼ ë³¼ ë•Œ, BeanDefinition ì´ë¼ëŠ” ê²ƒì´ ë³´ì¼ ë•Œê°€ ìˆë‹¤. ì´ë•Œ ì´ëŸ¬í•œ ë©”ì»¤ë‹ˆì¦˜ì„ ë– ì˜¬ë¦¬ë©´ ëœë‹¤.

ì¶”ê°€ë¡œ ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡í•˜ëŠ” ë°©ë²•ì€ ì—¬ëŸ¬ê°€ì§€ê°€ ìˆì§€ë§Œ, ë‘ê°€ì§€ë¡œ ì •ë¦¬í•  ìˆ˜ ìˆë‹¤.

1. ì§ì ‘ ìŠ¤í”„ë§ ë¹ˆì„ ì»¨í…Œì´ë„ˆì— ë“±ë¡í•˜ëŠ” ë°©ë²•
- XML ì„¤ì • íŒŒì¼ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•: applicationContext.xml íŒŒì¼ê³¼ ê°™ì€ XML ì„¤ì • íŒŒì¼ì„ í†µí•´ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•©ë‹ˆë‹¤. ì´ ë°©ë²•ì€ XML íŒŒì¼ì—ì„œ <bean> íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ìŠ¤í”„ë§ ë¹ˆì„ ì •ì˜í•˜ê³  ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•: í´ë˜ìŠ¤ì— @Component ê°™ì€ ì• ë…¸í…Œì´ì…˜ì„ ë¶™ì—¬ ìë™ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡ë˜ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš° @ComponentScan ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•´ íŠ¹ì • íŒ¨í‚¤ì§€ë¥¼ ìŠ¤ìº”í•˜ì—¬ ë¹ˆì„ ë“±ë¡í•©ë‹ˆë‹¤.
1. íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ í†µí•´ ë“±ë¡í•˜ëŠ” ë°©ë²•

ì´ ë°©ë²•ì€ AppConfig í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì—¬ëŸ¬ ì• ë…¸í…Œì´ì…˜ì„ í†µí•´ ë§Œë“  ë°©ë²•ì´ íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ í†µí•´ ë“±ë¡í•œ ë°©ë²•ì´ë‹¤.
