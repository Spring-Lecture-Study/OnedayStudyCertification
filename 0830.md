# 8μ›”30μΌ μ •λ¦¬

---

μ„Ήμ… 4 μ •λ¦¬

μ²μμ—λ” κ³ μ •ν• μΈ μ •μ±…μΌλ΅ λ“±κΈ‰μ΄ VIPμΌ κ²½μ° 1000μ›μ„ ν• μΈ ν•κΈ°λ΅ ν–μ—λ‹¤. ν•μ§€λ§ κΈ°νμμ— μ”μ²­μΌλ΅ κ²°μ  κΈμ•΅μ— 10%μ„ ν• μΈν•λ” κ²ƒμ„ λ³€κ²½λμ—λ‹¤.

μƒλ΅μ΄ ν• μΈ μ •μ±…μ„ ν™•μ¥ν•΄λ³΄μ.

### π“RateDiscountPolicy.java

```java
public class RateDiscountPolicy implements DiscountPolicy{

    private int discountPercent = 10;

    @Override
    public int discount(Member member, int price) {
        if (member.getGrade() == Grade.VIP) {
            return price * discountPercent / 100;
        } else {
            return 0;
        }
    }
```

λ©¤λ²„ λ“±κΈ‰μ΄ VIPλΌλ©΄ μƒν’ κ°€κ²©μ— 10%λ¥Ό λ°ν™ν•΄μ¤€λ‹¤.

μ΄μ  μ΄λ¬ν• ν• μΈ μ •μ±…μ„ μ¤λ” μ„λΉ„μ¤μ— μ μ©ν• λ ¤λ©΄, λ‹¤μκ³Ό κ°™μ΄ κµ¬ν„μ²΄λ¥Ό κ°μ•„ λΌμ°λ©΄ λλ‹¤.

```java
//private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
```

ν•μ§€λ§ μ΄λ¬ν• μ½”λ“λ” DIPμ™€, OCPλ¥Ό μ„λ°ν•λ‹¤.

![Untitled](https://github.com/user-attachments/assets/a68df8df-e3be-4714-b972-92da0e25fc1d)

![Untitled 1](https://github.com/user-attachments/assets/6fbe0194-9695-446c-a255-32ba48d92339)

μ–΄λ–»κ² λ¬Έμ λ¥Ό ν•΄κ²°ν•  μ μμ„κ°€?

- ν΄λΌμ΄μ–ΈνΈ μ½”λ“μΈ OrderServiceImpl μ€ DiscountPolicy μ μΈν„°νμ΄μ¤ λΏλ§ μ•„λ‹λΌ κµ¬μ²΄ ν΄λμ¤λ„ ν•¨κ» μμ΅΄ν•λ‹¤.
- κ·Έλμ„ κµ¬μ²΄ ν΄λμ¤λ¥Ό λ³€κ²½ν•  λ• ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ„ ν•¨κ» λ³€κ²½ν•΄μ•Ό ν•λ‹¤.
- DIP μ„λ° μ¶”μƒμ—λ§ μμ΅΄ν•λ„λ΅ λ³€κ²½(μΈν„°νμ΄μ¤μ—λ§ μμ΅΄)
- DIPλ¥Ό μ„λ°ν•μ§€ μ•λ„λ΅ μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•λ„λ΅ μμ΅΄κ΄€κ³„λ¥Ό λ³€κ²½ν•λ©΄ λλ‹¤.

μ΄λ¬ν• μ‚¬ν•­λ“¤μ„ μ μ©ν•μ—¬ λ‹¤μκ³Ό κ°™μ΄ μ½”λ“λ¥Ό λ³€κ²½ν•λ©΄ λλ‹¤.

```java
private MemberRepository memberRepository;
private DiscountPolicy discountPolicy;
```

μ΄λ ‡κ² ν•λ©΄ OrderServiceImplμ€ μΈν„°νμ΄μ¤μ—λ§ μμ΅΄ν•κ² λμ–΄ DIPλ¥Ό μ„λ°ν•μ§€ μ•κ² λ©λ‹λ‹¤. κ·Έλ¬λ‚ μ΄λ ‡κ² μμ΅΄μ„±λ§ μ •μν•΄ λ†“μΌλ©΄, μ‹¤μ λ΅ μ΄ ν•„λ“λ“¤μ— λ€ν• κµ¬ν„μ²΄λ‚ κ°μ²΄λ“¤μ΄ ν• λ‹Ήλμ§€ μ•μ•„ NullPointerExceptionμ΄ λ°μƒν•  μ μμµλ‹λ‹¤.

λν•, MemberServiceImpl, OrderServiceImpl ν΄λμ¤λ” νμ›, μ£Όλ¬Έ μ„λΉ„μ¤ν•λ” ν΄λμ¤μΈλ° μΈν„°νμ΄μ¤μ— λ€ν• κµ¬ν„μ²΄λ¥Ό μ§μ ‘ μ„ νƒν•΄μ„ λ„£μ–΄μ¤¬μ–΄μ•Ό ν–λ‹¤.

ν΄λμ¤λ“¤μ΄ μ§μ ‘ κµ¬ν„μ²΄λ¥Ό μ„ νƒν•κ³  μ£Όμ…ν•λ” κ²ƒμ€ **λ‹¨μΌ μ±…μ„ μ›μΉ™**μ„ μ„λ°ν•κ³  μμΌλ©°, ν΄λμ¤κ°€ λ„λ¬΄ λ§μ€ μ—­ν• μ„ λ‹΄λ‹Ήν•κ³  μλ‹¤λ” κ²ƒμ„ λ‚νƒ€λƒ…λ‹λ‹¤. 

### β… AppConfig

κ·Έλμ„ μ• ν”λ¦¬μΌ€μ΄μ…μ μ „μ²΄ λ™μ‘ λ°©μ‹μ„ **κµ¬μ„±(config)**ν•κΈ° μ„ν•΄, **κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±**ν•κ³ , **μ—°κ²°**ν•λ” μ±…μ„μ„ κ°€μ§€λ” λ³„λ„μ μ„¤μ • ν΄λμ¤λ¥Ό λ§λ“ λ‹¤.

```java
public class AppConfig {    

    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }
    public MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }
    public OrderService orderService() {
        return new OrderServiceImpl(
                memberRepository(), discountPolicy());
    }
    public DiscountPolicy discountPolicy() {
        // return new FixDiscountPolicy();
        return new RateDiscountPolicy();
    }
```

μ΄λ ‡κ² κ° μ„λΉ„μ¤ ν΄λμ¤μ—μ„ μ‚¬μ©ν•  κµ¬ν„μ²΄λ¥Ό AppConfig ν΄λμ¤μ **μƒμ„±μλ¥Ό ν†µν•΄ μ •μ**ν•λ©΄, μ„λΉ„μ¤ κµ¬ν„ ν΄λμ¤μ—μ„ κµ¬μ²΄μ μΈ κµ¬ν„μ²΄μ— λ€ν• μμ΅΄μ΄ μ κ±°λκ³ , **μ¤μ§ μΈν„°νμ΄μ¤μ—λ§ μμ΅΄**ν•κ² λ©λ‹λ‹¤. 

μ΄λ΅μ¨ DIPλ¥Ό μ¤€μν•  μ μμΌλ©°, ν•„μ”μ— λ”°λΌ AppConfig ν΄λμ¤μ—μ„ μ‰½κ² λ‹¤λ¥Έ κµ¬ν„μ²΄λ΅ λ³€κ²½ν•  μ μμ–΄ μ μ—°μ„±κ³Ό ν™•μ¥μ„±μ΄ λ†’μ•„μ§‘λ‹λ‹¤.

λν•, κ³ μ • ν• μΈ μ •μ±…μ„ μ‚¬μ©ν•λ‹¤κ³  ν•λ©΄, μ„λΉ„μ¤ ν΄λμ¤μ μ½”λ“ μμ • ν•„μ”μ—†μ΄ AppConfig ν΄λμ¤μ—μ„ κµ¬ν„μ²΄λ§ μμ •ν•λ©΄ λκΈ° λ•λ¬Έμ— OCPλ„ μ¤€μν•κ² λ©λ‹λ‹¤.

μ΄λ¬ν• μ½”λ“λ” μΆ‹μ€ κ°μ²΄μ§€ν–¥ μ„¤κ³„μ 5κ°€μ§€ μ›μΉ™ μ¤‘ 3κ°€μ§€μΈ **SRP**, **DIP**, **OCP**κ°€ μ μ©λ©λ‹λ‹¤.

### β… SRP λ‹¨μΌ μ±…μ„ μ›μΉ™

**ν• ν΄λμ¤λ” ν•λ‚μ μ±…μ„λ§ κ°€μ Έμ•Ό ν•λ‹¤.**

- μ „μ—λ” ν΄λΌμ΄μ–ΈνΈ κ°μ²΄(MemberServicImpl, OrderServiceImpl)κ°€ μ§μ ‘ κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³ , μ—°κ²°ν•κ³ , μ‹¤ν–‰ν•λ” λ‹¤μ–‘ν• μ±…μ„μ„ κ°€μ§€κ³  μμ
- SRP **λ‹¨μΌ μ±…μ„ μ›μΉ™**μ„ λ”°λ¥΄λ©΄μ„ κ΄€μ‹¬μ‚¬λ¥Ό λ¶„λ¦¬ν•¨
- κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  μ—°κ²°ν•λ” μ±…μ„μ€ **AppConfigκ°€ λ‹΄λ‹Ή**
- ν΄λΌμ΄μ–ΈνΈ κ°μ²΄λ” **μ‹¤ν–‰ν•λ” μ±…μ„**λ§ λ‹΄λ‹Ή

### β… DIP μμ΅΄κ΄€κ³„ μ—­μ „ μ›μΉ™

**ν”„λ΅κ·Έλλ¨Έλ” β€μ¶”μƒν™”μ— μμ΅΄ν•΄μ•Όμ§€, κµ¬μ²΄ν™”μ— μμ΅΄ν•λ©΄ μ•λλ‹¤.β€ μμ΅΄μ„± μ£Όμ…μ€ μ΄ μ›μΉ™μ„ λ”°λ¥΄λ” λ°©λ²• μ¤‘ ν•λ‚λ‹¤.**

- ν΄λΌμ΄μ–ΈνΈ μ½”λ“κ°€ DiscountPolicy μ¶”μƒν™” **μΈν„°νμ΄μ¤μ—λ§ μμ΅΄**ν•λ„λ΅ μ½”λ“λ¥Ό λ³€κ²½ν–λ‹¤.
- ν•μ§€λ§ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ” μΈν„°νμ΄μ¤λ§μΌλ΅λ” μ•„λ¬΄κ²ƒλ„ μ‹¤ν–‰ν•  μ μ—†λ‹¤.
- AppConfigκ°€ FixDiscountPolicy κ°μ²΄ μΈμ¤ν„΄μ¤λ¥Ό ν΄λΌμ΄μ–ΈνΈ μ½”λ“ λ€μ‹  μƒμ„±ν•΄μ„ ν΄λΌμ΄μ–ΈνΈ μ½”λ“μ— **μμ΅΄κ΄€κ³„λ¥Ό μ£Όμ…**ν–λ‹¤. μ΄λ ‡κ²ν•΄μ„ DIP μ›μΉ™μ„ λ”°λ¥΄λ©΄μ„ λ¬Έμ λ„ ν•΄κ²°ν–λ‹¤

### β… OCP

**μ†ν”„νΈμ›¨μ–΄ μ”μ†λ” ν™•μ¥μ—λ” μ—΄λ ¤ μμΌλ‚ λ³€κ²½μ—λ” λ‹«ν€ μμ–΄μ•Ό ν•λ‹¤.**

- λ‹¤ν•μ„± μ‚¬μ©ν•κ³  ν΄λΌμ΄μ–ΈνΈκ°€ DIPλ¥Ό μ§€ν‚΄
- μ• ν”λ¦¬μΌ€μ΄μ…μ„ **μ‚¬μ© μμ—­**κ³Ό **κµ¬μ„± μμ—­**μΌλ΅ λ‚λ”
- AppConfigκ°€ μμ΅΄κ΄€κ³„λ¥Ό FixDiscountPolicy RateDiscountPolicy λ΅ λ³€κ²½ν•΄μ„ ν΄λΌμ΄μ–ΈνΈ μ½”λ“
μ— μ£Όμ…ν•λ―€λ΅ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ” λ³€κ²½ν•μ§€ μ•μ•„λ„ λ¨
- μ†ν”„νΈμ›¨μ–΄ μ”μ†λ¥Ό μƒλ΅­κ² ν™•μ¥ν•΄λ„ μ‚¬μ© μμ—­μ λ³€κ²½μ€ λ‹«ν€ μλ‹¤!

## β… IOC, DI

---

### β‘οΈ μ μ–΄μ μ—­μ „ IoC(Inversion of Control)

- κΈ°μ΅΄ ν”„λ΅κ·Έλ¨μ€ ν΄λΌμ΄μ–ΈνΈ κµ¬ν„ κ°μ²΄κ°€ μ¤μ¤λ΅ ν•„μ”ν• μ„λ²„ κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³ , μ—°κ²°ν•κ³ , μ‹¤ν–‰ν–λ‹¤. ν•λ§λ””λ΅ **κµ¬ν„ κ°μ²΄κ°€ ν”„λ΅κ·Έλ¨μ μ μ–΄ νλ¦„μ„ μ¤μ¤λ΅ μ΅°μΆ…ν–λ‹¤**. κ°λ°μ μ…μ¥μ—μ„λ” μμ—°μ¤λ¬μ΄ νλ¦„μ΄λ‹¤.
- λ°λ©΄μ— AppConfigκ°€ λ“±μ¥ν• μ΄ν›„μ— **κµ¬ν„ κ°μ²΄λ” μμ‹ μ λ΅μ§μ„ μ‹¤ν–‰ν•λ” μ—­ν• λ§ λ‹΄λ‹Ήν•λ‹¤**. ν”„λ΅κ·Έλ¨μ μ μ–΄ νλ¦„μ€ μ΄μ  AppConfigκ°€ κ°€μ Έκ°„λ‹¤. μλ¥Ό λ“¤μ–΄μ„ OrderServiceImpl μ€ ν•„μ”ν• μΈν„°νμ΄μ¤λ“¤μ„ νΈμ¶ν•μ§€λ§μ–΄λ–¤ κµ¬ν„ κ°μ²΄λ“¤μ΄ μ‹¤ν–‰λ μ§€ λ¨λ¥Έλ‹¤.
- ν”„λ΅κ·Έλ¨μ— λ€ν• μ μ–΄ νλ¦„μ— λ€ν• κ¶ν•μ€ λ¨λ‘ AppConfigκ°€ κ°€μ§€κ³  μλ‹¤. μ‹¬μ§€μ–΄ OrderServiceImpl λ„ AppConfigκ°€ μƒμ„±ν•λ‹¤. κ·Έλ¦¬κ³  AppConfigλ” OrderServiceImpl μ΄ μ•„λ‹ OrderService μΈν„°νμ΄μ¤μ λ‹¤λ¥Έ κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  μ‹¤ν–‰ν•  μ λ„ μλ‹¤. κ·Έλ° μ‚¬μ‹¤λ„ λ¨λ¥Έμ²΄ OrderServiceImpl μ€ λ¬µλ¬µν μμ‹ μ λ΅μ§μ„ μ‹¤ν–‰ν•  λΏμ΄λ‹¤.
- μ΄λ ‡λ“― ν”„λ΅κ·Έλ¨μ μ μ–΄ νλ¦„μ„ μ§μ ‘ μ μ–΄ν•λ” κ²ƒμ΄ μ•„λ‹λΌ μ™Έλ¶€μ—μ„ κ΄€λ¦¬ν•λ” κ²ƒμ„ **μ μ–΄μ μ—­μ „(IoC)**μ΄λΌ ν•λ‹¤.

### π† **ν”„λ μ„μ›ν¬ vs λΌμ΄λΈλ¬λ¦¬**

- ν”„λ μ„μ›ν¬κ°€ λ‚΄κ°€ μ‘μ„±ν• μ½”λ“λ¥Ό μ μ–΄ν•κ³ , λ€μ‹  μ‹¤ν–‰ν•λ©΄ κ·Έκ²ƒμ€ ν”„λ μ„μ›ν¬κ°€ λ§λ‹¤.
    - ex/ (JUnit)Testμ½”λ“λ¥Ό μ‘μ„±ν•  λ• @Testλ¥Ό λ¶™μ΄κ³  λ΅μ§λ§ κ°λ°ν–λ”λ° μ΄κ²ƒμ„ μ‹¤ν–‰ν•κ³  μ μ–΄κ¶μ„ κ°€μ Έκ°€λ”κ±΄ JUnitμ΄κ³  λ€μ‹  μ‹¤ν–‰ν•΄μ¤€λ‹¤.
- λ°λ©΄μ— λ‚΄κ°€ μ‘μ„±ν• μ½”λ“κ°€ μ§μ ‘ μ μ–΄μ νλ¦„μ„ λ‹΄λ‹Ήν•λ‹¤λ©΄ κ·Έκ²ƒμ€ ν”„λ μ„μ›ν¬κ°€ μ•„λ‹λΌ λΌμ΄λΈλ¬λ¦¬λ‹¤.

### β‘οΈ μμ΅΄κ΄€κ³„ μ£Όμ… DI(Dependency Injection)

- OrderServiceImpl μ€ DiscountPolicy μΈν„°νμ΄μ¤μ— μμ΅΄ν•λ‹¤. μ‹¤μ  μ–΄λ–¤ κµ¬ν„ κ°μ²΄κ°€ μ‚¬μ©λ μ§€λ” λ¨λ¥Έλ‹¤.
- μμ΅΄κ΄€κ³„λ” **μ •μ μΈ ν΄λμ¤ μμ΅΄ κ΄€κ³„**μ™€, μ‹¤ν–‰ μ‹μ μ— κ²°μ •λλ” **λ™μ μΈ κ°μ²΄(μΈμ¤ν„΄μ¤) μμ΅΄ κ΄€κ³„** λ‘μ„ λ¶„λ¦¬ν•΄μ„ μƒκ°ν•΄μ•Ό ν•λ‹¤.

**μ •μ μΈ ν΄λμ¤ μμ΅΄κ΄€κ³„**
ν΄λμ¤κ°€ μ‚¬μ©ν•λ” import μ½”λ“λ§ λ³΄κ³  μμ΅΄κ΄€κ³„λ¥Ό μ‰½κ² νλ‹¨ν•  μ μλ‹¤. μ •μ μΈ μμ΅΄κ΄€κ³„λ” μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ‹¤ν–‰ν•μ§€ μ•μ•„λ„ λ¶„μ„ν•  μ μλ‹¤. ν΄λμ¤ λ‹¤μ΄μ–΄κ·Έλ¨μ„ λ³΄μ
OrderServiceImpl μ€ MemberRepository , DiscountPolicy μ— μμ΅΄ν•λ‹¤λ” κ²ƒμ„ μ• μ μλ‹¤.
κ·Έλ°λ° μ΄λ¬ν• ν΄λμ¤ μμ΅΄κ΄€κ³„ λ§μΌλ΅λ” μ‹¤μ  μ–΄λ–¤ κ°μ²΄κ°€ OrderServiceImpl μ— μ£Όμ… λ μ§€ μ• μ μ—†λ‹¤.

![Untitled 2](https://github.com/user-attachments/assets/90b4299b-cf84-471f-b1fb-a00377af0d5f)

 **λ™μ μΈ κ°μ²΄ μΈμ¤ν„΄ μμ΅΄κ΄€κ³„**

μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰ μ‹μ μ— μ‹¤μ  μƒμ„±λ κ°μ²΄ μΈμ¤ν„΄μ¤μ μ°Έμ΅°κ°€ μ—°κ²°λ μμ΅΄ κ΄€κ³„λ‹¤.

![cdeb421f-e36a-4b14-8b33-7d6b7b3ef7a6](https://github.com/user-attachments/assets/f9dfb88e-66f4-4461-8cda-b198ec82fe86)

- μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰ μ‹μ (λ°νƒ€μ„)μ— μ™Έλ¶€μ—μ„ μ‹¤μ  κµ¬ν„ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  ν΄λΌμ΄μ–ΈνΈμ— μ „λ‹¬ν•΄μ„ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„μ μ‹¤μ  μμ΅΄κ΄€κ³„κ°€ μ—°κ²° λλ” κ²ƒμ„ **μμ΅΄κ΄€κ³„ μ£Όμ…**μ΄λΌ ν•λ‹¤.
- κ°μ²΄ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•κ³ , κ·Έ **μ°Έμ΅°κ°’**μ„ μ „λ‹¬ν•΄μ„ μ—°κ²°λλ‹¤.
- μμ΅΄κ΄€κ³„ μ£Όμ…μ„ μ‚¬μ©ν•λ©΄ ν΄λΌμ΄μ–ΈνΈ μ½”λ“λ¥Ό λ³€κ²½ν•μ§€ μ•κ³ , ν΄λΌμ΄μ–ΈνΈκ°€ νΈμ¶ν•λ” λ€μƒμ νƒ€μ… μΈμ¤ν„΄μ¤λ¥Ό λ³€κ²½ν•  μ μλ‹¤.
- μμ΅΄κ΄€κ³„ μ£Όμ…μ„ μ‚¬μ©ν•λ©΄ μ •μ μΈ ν΄λμ¤ μμ΅΄κ΄€κ³„λ¥Ό λ³€κ²½ν•μ§€ μ•κ³ , λ™μ μΈ κ°μ²΄ μΈμ¤ν„΄μ¤ μμ΅΄κ΄€κ³„λ¥Ό μ‰½κ² λ³€κ²½ν•  μ μλ‹¤.

### β… IoC μ»¨ν…μ΄λ„, DI μ»¨ν…μ΄λ„

- AppConfig μ²λΌ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  κ΄€λ¦¬ν•λ©΄μ„ μμ΅΄κ΄€κ³„λ¥Ό μ—°κ²°ν•΄ μ£Όλ” κ²ƒμ„ **IoC μ»¨ν…μ΄λ„** λλ” **DI μ»¨ν…μ΄λ„**λΌ ν•λ‹¤.
- μμ΅΄κ΄€κ³„ μ£Όμ…μ— μ΄μ μ„ λ§μ¶”μ–΄ μµκ·Όμ—λ” μ£Όλ΅ **DI μ»¨ν…μ΄λ„λΌ** ν•λ‹¤.λλ” μ–΄μƒλΈ”λ¬, μ¤λΈμ νΈ ν©ν† λ¦¬ λ“±μΌλ΅ λ¶λ¦¬κΈ°λ„ ν•λ‹¤.

## β… μ¤ν”„λ§μΌλ΅ μ „ν™ν•κΈ°

---

μ§€κΈκΉμ§€ μμν• μλ°” μ½”λ“λ§μΌλ΅ DIλ¥Ό μ μ©ν–λ‹¤. μ΄μ  μ¤ν”„λ§μ„ μ‚¬μ©ν•΄λ³΄μ.

**AppConfig μ¤ν”„λ§ κΈ°λ°μΌλ΅ λ³€κ²½**

```java
@Configuration
public class AppConfig {    
    @Bean
    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }
    @Bean
    public MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }
    @Bean
    public OrderService orderService() {
        return new OrderServiceImpl(
                memberRepository(), discountPolicy());
    }
    @Bean
    public DiscountPolicy discountPolicy() {
        // return new FixDiscountPolicy();
        return new RateDiscountPolicy();
    }
```

- @Configuration μ–΄λ…Έν…μ΄μ…μ„ λ¶™μ΄λ©΄ μ΄ νμΌμ€ μ¤ν”„λ§ μ„¤μ •ν•λ” νμΌμ„μ„ λ…μ‹ν•λ” κ²ƒμ΄λ‹¤.
- @Beanμ„ λ¶™μ΄λ©΄ μ¤ν”„λ§ μ»¨ν„°μ—λ„μ—μ„ κ΄€λ¦¬ν•λ” κ°μ²΄(λΉ)κ°€ λλ‹¤.

μ–΄λ–»κ² μ‚¬μ©λλ” Member.app νμΌμ—μ„ ν™•μΈν•΄ λ³΄κ² λ‹¤.

**π“ MemberApp.java**

```java
public class MemberApp {

    public static void main(String[] args) {
//        AppConfig appConfig = new AppConfig();
//        MemberService memberService = appConfig.memberService();
        ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AppConfig.class);
        MemberService memberService = applicationContext.getBean("memberService", MemberService.class);

        Member member = new Member(1L, "membera", Grade.VIP);
        memberService.join(member);

        Member findMember = memberService.findMember(1L);
        System.out.println("new Member" + member.getName());
        System.out.println("find Member" + findMember.getName());
    }
}
```

**ApplicationContext**

- μ¤ν”„λ§μ ν•µμ‹¬ μΈν„°νμ΄μ¤ μ¤‘ ν•λ‚λ΅, **μ¤ν”„λ§ μ»¨ν…μ΄λ„**λ¥Ό μλ―Έν•©λ‹λ‹¤. μ΄ μ»¨ν…μ΄λ„λ” μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ ν•„μ”ν• λ¨λ“  κ°μ²΄λ¥Ό μƒμ„±ν•κ³  κ΄€λ¦¬ν•©λ‹λ‹¤.

**AnnotationConfigApplicationContext**

- μλ°” μ• λ…Έν…μ΄μ… κΈ°λ°μ μ„¤μ • ν΄λμ¤λ¥Ό μ‚¬μ©ν•λ” μ¤ν”„λ§ μ»¨ν…μ΄λ„λ¥Ό μƒμ„±ν•λ” κµ¬ν„μ²΄μ…λ‹λ‹¤.
- λ§¤κ°λ³€μμ— AppConfig ν΄λμ¤λ¥Ό λ„£μ–΄μ£Όλ©΄, AppConfigμ— μλ” ν™κ²½ μ„¤μ • μ •λ³΄λ¥Ό κ°€μ§€κ³  μ¤ν”„λ§μ΄ **@Bean** λ¶™μ—¬μ Έ μλ” λ©”μ„λ“λ“¤μ„ μ¤ν”„λ§ μ»¨ν…μ΄λ„ μ—λ‹¤κ°€ λ„£μ–΄μ„ κ΄€λ¦¬ν•΄μ¤€λ‹¤.

**getBean**

μ¤ν”„λ§ μ»¨ν…μ΄λ„μ—μ„ κ΄€λ¦¬ μ¤‘μΈ λΉ κ°μ²΄λ¥Ό λ°ν™ν•©λ‹λ‹¤.
μ²« λ²μ§Έ λ§¤κ°λ³€μ "memberService"λ” λΉμ μ΄λ¦„μ΄λ©°, μ΄ μ΄λ¦„μ€ @Bean λ©”μ„λ“ μ΄λ¦„μ— μν•΄ κ²°μ •λ©λ‹λ‹¤.
λ‘ λ²μ§Έ λ§¤κ°λ³€μ MemberService.classλ” λ°ν™λ  κ°μ²΄μ νƒ€μ…μ„ μ§€μ •ν•©λ‹λ‹¤.

### β… μ¤ν”„λ§ μ»¨ν…μ΄λ„

- ApplicationContext λ¥Ό μ¤ν”„λ§ μ»¨ν…μ΄λ„λΌ ν•λ‹¤.
- κΈ°μ΅΄μ—λ” κ°λ°μκ°€ AppConfig λ¥Ό μ‚¬μ©ν•΄μ„ μ§μ ‘ κ°μ²΄λ¥Ό μƒμ„±ν•κ³  DIλ¥Ό ν–μ§€λ§, μ΄μ λ¶€ν„°λ” **μ¤ν”„λ§ μ»¨ν…μ΄λ„**λ¥Ό ν†µν•΄μ„ μ‚¬μ©ν•λ‹¤.
- μ¤ν”„λ§ μ»¨ν…μ΄λ„λ” **@Configuration** μ΄ λ¶™μ€ AppConfig λ¥Ό μ„¤μ •(κµ¬μ„±) μ •λ³΄λ΅ μ‚¬μ©ν•λ‹¤. μ—¬κΈ°μ„ **@Bean** μ΄λΌ μ ν λ©”μ„λ“λ¥Ό λ¨λ‘ νΈμ¶ν•΄μ„ λ°ν™λ κ°μ²΄λ¥Ό μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— λ“±λ΅ν•λ‹¤. μ΄λ ‡κ² μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— λ“±λ΅λ κ°μ²΄λ¥Ό **μ¤ν”„λ§ λΉ**μ΄λΌ ν•λ‹¤.
- μ¤ν”„λ§ λΉμ€ @Bean μ΄ λ¶™μ€ λ©”μ„λ“μ λ…μ„ μ¤ν”„λ§ λΉμ μ΄λ¦„μΌλ΅ μ‚¬μ©ν•λ‹¤. ( memberService , orderService )
- μ΄μ „μ—λ” κ°λ°μκ°€ ν•„μ”ν• κ°μ²΄λ¥Ό AppConfig λ¥Ό μ‚¬μ©ν•΄μ„ μ§μ ‘ μ΅°νν–μ§€λ§, μ΄μ λ¶€ν„°λ” μ¤ν”„λ§ μ»¨ν…μ΄λ„λ¥Ό ν†µν•΄μ„ ν•„μ”ν• μ¤ν”„λ§ λΉ(κ°μ²΄)λ¥Ό μ°Ύμ•„μ•Ό ν•λ‹¤. μ¤ν”„λ§ λΉμ€ **applicationContext.getBean()** λ©”μ„λ“λ¥Ό μ‚¬μ©ν•΄μ„ μ°Ύμ„ μ μλ‹¤.
- κΈ°μ΅΄μ—λ” κ°λ°μκ°€ μ§μ ‘ μλ°”μ½”λ“λ΅ λ¨λ“  κ²ƒμ„ ν–λ‹¤λ©΄ μ΄μ λ¶€ν„°λ” μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— κ°μ²΄λ¥Ό μ¤ν”„λ§ λΉμΌλ΅ λ“±λ΅ν•κ³ , μ¤ν”„λ§ μ»¨ν…μ΄λ„μ—μ„ μ¤ν”„λ§ λΉμ„ μ°Ύμ•„μ„ μ‚¬μ©ν•λ„λ΅ λ³€κ²½λμ—λ‹¤.
- μ½”λ“κ°€ μ•½κ°„ λ” λ³µμ΅ν•΄μ§„ κ²ƒ κ°™μ€λ°, μ¤ν”„λ§ μ»¨ν…μ΄λ„λ¥Ό μ‚¬μ©ν•λ©΄ μ–΄λ–¤ μ¥μ μ΄ μμ„κΉ?
